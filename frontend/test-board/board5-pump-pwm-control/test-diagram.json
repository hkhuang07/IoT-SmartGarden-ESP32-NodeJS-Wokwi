{
  "version": 1,
  "author": "MiniMax Agent",
  "editor": "wokwi",
  "parts": [
    {
      "type": "wokwi-esp32-devkit-v1",
      "id": "esp32",
      "top": 0,
      "left": 0,
      "attrs": {
        "flash": "4MB",
        "psram": "8MB"
      }
    },
    {
      "type": "wokwi-pwm-motor",
      "id": "pump-motor",
      "top": -150,
      "left": 80,
      "attrs": {
        "speed": "0"
      }
    },
    {
      "type": "wokwi-relay-module",
      "id": "main-valve-relay",
      "top": -120,
      "left": 280,
      "attrs": {
        "on": "false"
      }
    },
    {
      "type": "wokwi-relay-module",
      "id": "emergency-valve-relay",
      "top": -120,
      "left": 400,
      "attrs": {
        "on": "false"
      }
    },
    {
      "type": "wokwi-flow-sensor",
      "id": "flow-sensor",
      "top": -80,
      "left": 80,
      "attrs": {
        "rate": "0"
      }
    },
    {
      "type": "wokwi-analog-sensor",
      "id": "pressure-sensor",
      "top": -80,
      "left": 200,
      "attrs": {
        "value": "2000"
      }
    },
    {
      "type": "wokwi-led",
      "id": "status-led",
      "top": -80,
      "left": 520,
      "attrs": {
        "color": "green"
      }
    },
    {
      "type": "wokwi-led",
      "id": "alarm-led",
      "top": -80,
      "left": 640,
      "attrs": {
        "color": "red"
      }
    },
    {
      "type": "wokwi-pushbutton",
      "id": "start-button",
      "top": 120,
      "left": 80,
      "attrs": {
        "pressed": "false"
      }
    },
    {
      "type": "wokwi-pushbutton",
      "id": "stop-button",
      "top": 120,
      "left": 180,
      "attrs": {
        "pressed": "false"
      }
    },
    {
      "type": "wokwi-pushbutton",
      "id": "emergency-button",
      "top": 120,
      "left": 280,
      "attrs": {
        "pressed": "false"
      }
    },
    {
      "type": "wokwi-water-valve",
      "id": "main-valve",
      "top": 200,
      "left": 80,
      "attrs": {
        "open": "false"
      }
    },
    {
      "type": "wokwi-water-valve",
      "id": "emergency-valve",
      "top": 200,
      "left": 200,
      "attrs": {
        "open": "false"
      }
    }
  ],
  "connections": [
    ["esp32:GND.1", "pump-motor:GND", "black", ["0","-200","30","0"]],
    ["esp32:3V3.1", "pump-motor:VCC", "red", ["0","-200","50","0"]],
    ["esp32:4", "pump-motor:PWM", "orange", ["200","-150","0","0"]],
    
    ["esp32:GND.1", "main-valve-relay:GND", "black", ["400","-120","0","0"]],
    ["esp32:3V3.1", "main-valve-relay:VCC", "red", ["400","-120","0","0"]],
    ["esp32:5", "main-valve-relay:IN1", "yellow", ["400","-120","0","0"]],
    ["main-valve-relay:COM", "main-valve:GND", "black", ["0","60","-100","0"]],
    ["main-valve-relay:NO", "main-valve:VCC", "red", ["0","60","-100","0"]],
    
    ["esp32:GND.1", "emergency-valve-relay:GND", "black", ["520","-120","0","0"]],
    ["esp32:3V3.1", "emergency-valve-relay:VCC", "red", ["520","-120","0","0"]],
    ["esp32:18", "emergency-valve-relay:IN1", "purple", ["520","-120","0","0"]],
    ["emergency-valve-relay:COM", "emergency-valve:GND", "black", ["0","60","-100","0"]],
    ["emergency-valve-relay:NO", "emergency-valve:VCC", "red", ["0","60","-100","0"]],
    
    ["esp32:GND.1", "flow-sensor:GND", "black", ["180","-80","0","0"]],
    ["esp32:3V3.1", "flow-sensor:VCC", "red", ["180","-80","0","0"]],
    ["esp32:19", "flow-sensor:SIG", "blue", ["180","-80","0","0"]],
    
    ["esp32:GND.1", "pressure-sensor:GND", "black", ["300","-80","0","0"]],
    ["esp32:3V3.1", "pressure-sensor:VCC", "red", ["300","-80","0","0"]],
    ["esp32:34", "pressure-sensor:SIG", "green", ["300","-80","0","0"]],
    
    ["esp32:GND.1", "status-led:2", "black", ["640","-80","0","0"]],
    ["esp32:2", "status-led:1", "green", ["640","-80","0","0"]],
    
    ["esp32:GND.1", "alarm-led:2", "black", ["760","-80","0","0"]],
    ["esp32:12", "alarm-led:1", "red", ["760","-80","0","0"]],
    
    ["esp32:GND.1", "start-button:2", "black", ["180","120","0","0"]],
    ["esp32:25", "start-button:1", "blue", ["180","120","0","0"]],
    
    ["esp32:GND.1", "stop-button:2", "black", ["280","120","0","0"]],
    ["esp32:26", "stop-button:1", "blue", ["280","120","0","0"]],
    
    ["esp32:GND.1", "emergency-button:2", "black", ["380","120","0","0"]],
    ["esp32:27", "emergency-button:1", "blue", ["380","120","0","0"]],
    
    ["esp32:GND.1", "main-valve:GND", "black", ["180","200","0","0"]],
    ["main-valve:CONTROL", "esp32:5", "yellow", ["180","200","-100","-120"]],
    
    ["esp32:GND.1", "emergency-valve:GND", "black", ["300","200","0","0"]],
    ["emergency-valve:CONTROL", "esp32:18", "purple", ["300","200","-100","-120"]]
  ],
  "dependencies": {}
}